{% extends 'timetable/base.html' %}

{% block content %}
    <h2 class="text-center mb-4">Add Course</h2>
    
    <form method="post" class="p-4 shadow-sm bg-light rounded justify-content-center">
        {% csrf_token %}
        
        <!-- Display form errors at the top -->
        {% if form.errors %}
            <div class="alert alert-danger">
                <ul class="errorlist">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        
        <!-- Render the form fields with labels -->
        <div class="mb-3">
            <label for="{{ form.course_code.id_for_label }}" class="form-label">{{ form.course_code.label }}</label>
            {{ form.course_code }}
            {% if form.course_code.errors %}
                <div class="text-danger">
                    {% for error in form.course_code.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.full_name.id_for_label }}" class="form-label">{{ form.full_name.label }}</label>
            {{ form.full_name }}
            {% if form.full_name.errors %}
                <div class="text-danger">
                    {% for error in form.full_name.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.short_name.id_for_label }}" class="form-label">{{ form.short_name.label }}</label>
            {{ form.short_name }}
            {% if form.short_name.errors %}
                <div class="text-danger">
                    {% for error in form.short_name.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="mb-3">
            <label for="{{ form.credit_hours.id_for_label }}" class="form-label">{{ form.credit_hours.label }}</label>
            {{ form.credit_hours }}
            {% if form.credit_hours.errors %}
                <div class="text-danger">
                    {% for error in form.credit_hours.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.lab_crh.id_for_label }}" class="form-label">{{ form.lab_crh.label }}</label>
            {{ form.lab_crh }}
            {% if form.lab_crh.errors %}
                <div class="text-danger">
                    {% for error in form.lab_crh.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.pre_req.id_for_label }}" class="form-label">{{ form.pre_req.label }}</label>
            {{ form.pre_req }}
            {% if form.pre_req.errors %}
                <div class="text-danger">
                    {% for error in form.pre_req.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.category.id_for_label }}" class="form-label">{{ form.category.label }}</label>
            {{ form.category }}
            {% if form.category.errors %}
                <div class="text-danger">
                    {% for error in form.category.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Add Course</button>
        <a href="{% url 'upload_courses_excel' %}" class="btn btn-secondary">Upload Course excel</a>
    </form>
{% endblock %}
